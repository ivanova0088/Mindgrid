<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MindGrid â€“ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø§Ø·Ø¹Ø©</title>
  <link rel="stylesheet" href="styles.css?v=mgcw_fixA">
  <style>
    body{background:#0F172A;color:#E5E7EB;font-family:system-ui,-apple-system,Segoe UI,Roboto}
    .wrap{max-width:960px;margin:24px auto;padding:16px}
    .card{background:#111827;border:1px solid #1F2937;border-radius:14px;padding:16px}
    .ok{background:#064e3b;color:#d1fae5;border-radius:10px;padding:10px 12px;margin-bottom:12px;display:none}
    .warn{background:#3f1d1d;color:#fecaca;border-radius:10px;padding:10px 12px;margin-bottom:12px;display:none}
    #cw-root{min-height:220px;display:flex;align-items:center;justify-content:center;border:1px dashed #334155;border-radius:12px;margin-top:12px}
    .btn{background:#0ea5e9;color:#002233;border:0;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸ§  MindGrid <small id="tag" style="font-size:14px;opacity:.8">mgcw_fixA</small></h1>

    <div id="msgOk" class="ok">ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø¨Ù†Ø¬Ø§Ø­. Ø³Ù†Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†â€¦</div>
    <div id="msgWarn" class="warn"></div>

    <div class="card">
      <p style="margin:0 0 8px">Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨:</p>
      <div id="cw-root">â€¦Ø³ÙŠØªÙ… Ø§Ù„ØªÙ‡ÙŠØ¦Ø©â€¦</div>
      <div style="margin-top:12px"><button class="btn" id="btnStart">Ø§Ø¨Ø¯Ø£ ÙŠØ¯ÙˆÙŠÙ‹Ø§</button></div>
    </div>
  </div>

  <!-- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ â€” Ø¨Ø¯ÙˆÙ† type="module" -->
  <script src="js/library.js?v=mgcw_fixA" defer></script>
  <script src="js/core.js?v=mgcw_fixA" defer></script>
  <script src="js/ui.js?v=mgcw_fixA" defer></script>
  <script src="js/crossword_canvas.js?v=mgcw_fixA" defer></script>

  <!-- ÙØ­Øµ Ø³Ø±ÙŠØ¹ + ØªØ´ØºÙŠÙ„ -->
  <script>
    const ok = s => { const el = document.getElementById('msgOk'); el.style.display='block'; if(s) el.textContent = s; };
    const warn = s => { const el = document.getElementById('msgWarn'); el.style.display='block'; el.textContent = s; };

    window.addEventListener('DOMContentLoaded', () => {
      const tryStart = () => {
        if (!window.MG) { warn('MG ØºÙŠØ± Ù…Ø¹Ø±Ù‘Ù. ØªØ£ÙƒÙ‘Ø¯ Ø£Ù† library.js ÙŠÙØ­Ù…ÙÙ‘Ù„ Ø£ÙˆÙ„Ø§Ù‹ ÙˆØ¨Ø¯ÙˆÙ† type="module".'); return; }
        if (typeof window.startCrosswordCanvas !== 'function') {
          warn('Ø§Ù„Ø¯Ø§Ù„Ø© startCrosswordCanvas ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©. ØªØ£ÙƒÙ‘Ø¯ Ù…Ù† js/crossword_canvas.js ÙˆØ§Ø³Ù…Ù‡ Ø¨Ø´Ø±Ø·Ø© Ø³ÙÙ„ÙŠØ©.');
          return;
        }
        ok('ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ â€” Ù†Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¢Ù†.');
        try { window.startCrosswordCanvas({ mount:'#cw-root' }); }
        catch(e){ warn('Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø¯Ø¡: ' + e.message); console.error(e); }
      };

      // Ø²Ø± ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠ Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„ØªØ´Ø®ÙŠØµ
      document.getElementById('btnStart').addEventListener('click', tryStart);

      // ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ù„Ø­Ø¸Ø§Øª ÙƒÙŠ ØªØ¶Ù…Ù† ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ defer
      setTimeout(tryStart, 50);
    });
  </script>
</body>
</html>
